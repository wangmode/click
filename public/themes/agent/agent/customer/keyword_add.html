<!DOCTYPE html><html><head>    <meta charset="utf-8">    <title>充值记录</title>    <meta name="renderer" content="webkit">    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">    <link rel="stylesheet" href="__TMPL__/public/layui/css/layui.css" media="all">    <link rel="stylesheet" href="__TMPL__/public/style/admin.css" media="all">    <script type="text/javascript" src="__TMPL__/public/js/jquery.min.js"></script>    <script type="text/javascript" src="__TMPL__/public/layui/layui.js"></script>    <script type="text/javascript" src="__TMPL__/public/layui/admin.js"></script>    <script type="text/javascript" src="__TMPL__/public/layui/lay/modules/util.js"></script></head><body><div class="layui-fluid">    <div class="layui-card">        <div class="layui-tab layui-tab-brief">            <ul class="layui-tab-title">                <li class="layui-this">添加关键词</li>            </ul>        </div>        <div class="layui-form layui-card-header layuiadmin-card-header-auto">            <div class="layui-form-item">                <div class="layui-inline">                    <div class="layui-input-inline" style="width:500px;">                        <input type="text" name="keyword" id="search" placeholder="请输入关键词" autocomplete="off" class="layui-input">                    </div>                </div>                <div class="layui-inline search">                    <button id="btn" class="layui-btn" data-type="reload" type="button">搜索</button>                </div>            </div>        </div>        <div class="layui-card-body" style="display:none;">            <table id="dataTable" lay-filter="dataTable" width="500px"></table>            <div class="layui-form layui-card-header layuiadmin-card-header-auto">                <div class="layui-form-item">                    <div class="layui-inline">                        <div class="layui-input-inline" style="width:500px;">                            <input type="text" name="url" id="url" placeholder="请输入网址" autocomplete="off" class="layui-input">                        </div>                    </div>                    <div class="layui-inline search" id="demoTable">                        <button id="sub" class="layui-btn" data-type="reload getCheckData">提交</button>                    </div>                </div>            </div>        </div>        <script type="text/javascript">            $(document).ready(function(){                $(".search").click(function(){                    $(".layui-card-body").css("display","block");                });            });        </script>        <script id="price" type="text/html">            {{# layui.each(d.price,function(index,item){ }}                <input type="checkbox" name="price" lay-skin="primary" value="{{ item.id }}">{{ item.name }}：{{ item.price }}/天&nbsp&nbsp&nbsp&nbsp            {{# }) }}        </script>        <script type="text/html" id="setmeal">            <input type="radio" name="setmeal_{{ d.keyword }}"  value="1" title="90天">            <input type="radio" name="setmeal_{{ d.keyword }}"  value="2" title="180天">            <input type="radio" name="setmeal_{{ d.keyword }}"  value="3" title="360天">        </script>        <script>            layui.config({                base: '__TMPL__/public/', //静态资源所在路径            }).extend({                index: 'lib/index' //主入口模块            }).use(['layer','table','form'],function () {                var layer = layui.layer;                var form = layui.form;                var table = layui.table;                //用户表格初始化                var dataTable = table.render({                    elem: '#dataTable'                    ,url: "{:url('Customer/excavateKeywords')}" //数据接口                    ,response: {                        statusCode: 200 //规定成功的状态码为 200，table 组件默认为 0                    }                    ,page:true                    ,cols: [[ //表头                        {type: 'checkbox', fixed: 'left'}                        ,{field: 'xuhao', title: '序号',type:'numbers'}                        ,{field: 'keyword', title: '关键词',align:'center'}                        ,{field: 'price', title: '搜索引擎',toolbar: '#price',width:800}                        ,{field: 'setmeal', title: '计费时间',toolbar: '#setmeal',align:'center'}                    ]]                });                var $ = layui.$, active = {                    reload: function(){                        var search = $('#search');                        //执行重载                        table.reload('dataTable', {                            where: {                                keyword: search.val(),                            }                        });                  }                };                $('.search #btn').on('click', function(){                    var type = $(this).data('type');                    active[type] ? active[type].call(this) : '';                });                                $('.search #sub').on('click',function () {                    // var url = $('#url').val();   //获取网址                    // if(url.length == 0){                    //     alert('请添加网址')                    // }                    // var keyword = $('#search').val();  //获取关键词                    table.on('toolbar(dataTable)', function(obj){                        var checkStatus = table.checkStatus(dataTable);                        var data = checkStatus.data;                        layer.alert(JSON.stringify(data));                    });                });                //监听计费时间                // form.on('radio(setmeal)', function(obj){                //     layer.tips(this.value + ' ' + this.name + '：'+ obj.elem.checked, obj.othis);                // });                //                // //监听搜索引擎                // form.on('checkbox(price)', function(obj){                //     layer.tips(this.value + ' ' + this.name + '：'+ obj.elem.checked, obj.othis);                // });                // //监听选中行                table.on('checkbox(dataTable)', function(obj){                    var data = obj.data;//基本信息吧                    var keyword = data.keyword;//关键字                    var price = [];//搜索引擎                    $('input[name=price]:checked').each(function(i){                        price[i]= $(this).val();                    });                    var setmeal =  $('input[name=setmeal_'+obj.data.keyword+']:checked').val();//计费时间                    var postData = [];                     postData['keyword'] = keyword;                     postData['price'] = price;                     postData['setmeal'] = setmeal;                    // console.log(postData);                });            });            var $ = layui.$, active = {                getCheckData: function () { //获取选中数据                    var checkStatus = table.checkStatus('dataTable')                        , data = checkStatus.data;                    //data是你的数据，下面接下来写url传值                    console.log(data);                    // layer.alert(JSON.stringify(data));                }            };            $('#demoTable .layui-btn').on('click', function(){                var type = $(this).data('type');                active[type] ? active[type].call(this) : '';            });            function time2date(t){                var t1 = parseInt(t + '000');                return layui.util.toDateString(t1);            }        </script>    </div></body></html>